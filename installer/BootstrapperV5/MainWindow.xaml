<Window x:Class="BloxMC.Bootstrapper.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="BloxMC Launcher Setup"
        Width="860"
        Height="520"
        MinWidth="860"
        MinHeight="520"
        WindowStyle="None"
        ResizeMode="CanResize"
        AllowsTransparency="True"
        Background="Transparent"
        SnapsToDevicePixels="True"
        UseLayoutRounding="True"
        MouseLeftButtonDown="Window_MouseLeftButtonDown"
        Loaded="Window_Loaded">
  <Border CornerRadius="18" BorderThickness="1" BorderBrush="#3C3D5A" Background="#101321">
    <Grid Background="{StaticResource WindowBackgroundGradient}">
      <Border Height="3"
              VerticalAlignment="Top"
              Margin="1,1,1,0"
              Background="{StaticResource TopAccentGradient}"
              CornerRadius="17,17,0,0" />
      <Border Margin="16" Style="{StaticResource PanelCardStyle}" Background="{StaticResource Panel2Brush}">
        <Grid Margin="18" SnapsToDevicePixels="True" UseLayoutRounding="True">
          <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="10" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="10" />
            <RowDefinition Height="*" />
            <RowDefinition Height="10" />
            <RowDefinition Height="Auto" />
          </Grid.RowDefinitions>

          <Grid Grid.Row="0">
            <Grid.ColumnDefinitions>
              <ColumnDefinition Width="*" />
              <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <StackPanel>
              <TextBlock Text="BloxMC Launcher" FontSize="29" FontWeight="Bold" Style="{StaticResource PrimaryTextStyle}" />
              <TextBlock Text="BloxMC Launcher Setup" Margin="0,3,0,0" FontSize="13" Style="{StaticResource SecondaryTextStyle}" />
            </StackPanel>
            <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Right">
              <Button x:Name="MinimizeButton" Style="{StaticResource CaptionButtonStyle}" Content="-" Margin="0,0,8,0" Click="MinimizeButton_Click" />
              <Button x:Name="MaximizeButton" Style="{StaticResource CaptionButtonStyle}" Content="â–¡" Margin="0,0,8,0" Click="MaximizeButton_Click" />
              <Button x:Name="CloseButton" Style="{StaticResource CaptionCloseButtonStyle}" Content="X" Click="CloseButton_Click" />
            </StackPanel>
          </Grid>

          <Border Grid.Row="2" Style="{StaticResource PanelCardStyle}" Background="#1E2240">
              <StackPanel Orientation="Horizontal" Margin="8,7">
                <Button x:Name="HomeTabButton" Content="Home" Style="{StaticResource TabButtonStyle}" Click="HomeTabButton_Click" />
                <Button x:Name="InstallTabButton" Content="Install" Margin="6,0,0,0" Style="{StaticResource TabButtonStyle}" Click="InstallTabButton_Click" />
                <Button x:Name="SettingsTabButton" Content="Settings" Margin="6,0,0,0" Style="{StaticResource TabButtonStyle}" Click="SettingsTabButton_Click" />
                <Button x:Name="EditTabButton" Content="Edit" Margin="6,0,0,0" Style="{StaticResource TabButtonStyle}" Click="EditTabButton_Click" />
            </StackPanel>
          </Border>

          <Grid Grid.Row="4" x:Name="TabContentHost">
            <Border x:Name="HomeTabContent" Style="{StaticResource PanelCardStyle}" Background="#1A1E36">
              <StackPanel Margin="16">
                <TextBlock Text="Welcome" FontSize="24" FontWeight="SemiBold" Style="{StaticResource PrimaryTextStyle}" />
                <TextBlock Margin="0,10,0,0"
                           Style="{StaticResource SecondaryTextStyle}"
                           Text="Install, repair, or remove BloxMC Launcher with one setup file." />
                <TextBlock Margin="0,10,0,0" Style="{StaticResource SecondaryTextStyle}" Text="The setup keeps your style and settings flow clean." />
                <TextBlock Margin="0,10,0,0" Style="{StaticResource SecondaryTextStyle}" Text="Head to Install to get started." />
              </StackPanel>
            </Border>

            <Border x:Name="InstallTabContent" Style="{StaticResource PanelCardStyle}" Background="#1A1E36" Visibility="Collapsed">
              <ScrollViewer VerticalScrollBarVisibility="Auto"
                            HorizontalScrollBarVisibility="Disabled"
                            CanContentScroll="False">
              <Grid Margin="14">
                <Grid.RowDefinitions>
                  <RowDefinition Height="Auto" />
                  <RowDefinition Height="10" />
                  <RowDefinition Height="Auto" />
                  <RowDefinition Height="8" />
                  <RowDefinition Height="Auto" />
                  <RowDefinition Height="10" />
                  <RowDefinition Height="Auto" />
                  <RowDefinition Height="Auto" />
                  <RowDefinition Height="Auto" />
                  <RowDefinition Height="10" />
                  <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <Border Grid.Row="0" Style="{StaticResource PanelCardStyle}" Background="#161935">
                  <StackPanel Margin="14">
                    <TextBlock x:Name="StatusText" Text="Checking installation state..." FontSize="18" FontWeight="SemiBold" Style="{StaticResource PrimaryTextStyle}" />
                    <TextBlock x:Name="DetailText" Margin="0,8,0,0" FontSize="13" Style="{StaticResource SecondaryTextStyle}" TextWrapping="Wrap" />
                  </StackPanel>
                </Border>

                <ProgressBar Grid.Row="2" x:Name="InstallProgressBar" Value="0" Minimum="0" Maximum="100" Style="{StaticResource InstallProgressBarStyle}" />

                <Grid Grid.Row="4">
                  <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                  </Grid.ColumnDefinitions>
                  <TextBlock x:Name="ActionHintText"
                             Grid.Column="0"
                             Text="Install BloxMC Launcher in %LOCALAPPDATA%\BloxMC"
                             FontSize="12"
                             Style="{StaticResource SecondaryTextStyle}"
                             TextWrapping="NoWrap"
                             TextTrimming="CharacterEllipsis"
                             ToolTip="{Binding Text, RelativeSource={RelativeSource Self}}" />
                  <TextBlock x:Name="ProgressLabel" Grid.Column="1" FontSize="12" Style="{StaticResource SecondaryTextStyle}" Text="0%" />
                </Grid>

                <StackPanel Grid.Row="6" Orientation="Horizontal" Margin="0,2,0,0">
                  <Button x:Name="PrimaryActionButton" Content="Install" Style="{StaticResource PrimaryPillButton}" Click="PrimaryActionButton_Click" />
                  <Button x:Name="RepairButton" Content="Repair" Margin="10,0,0,0" Style="{StaticResource SecondaryPillButton}" Visibility="Collapsed" Click="RepairButton_Click" />
                  <Button x:Name="UninstallButton" Content="Uninstall" Margin="10,0,0,0" Style="{StaticResource DangerPillButton}" Visibility="Collapsed" Click="UninstallButton_Click" />
                </StackPanel>

                <TextBlock Grid.Row="7"
                           Text="Live log output"
                           Margin="0,0,0,2"
                           FontSize="12"
                           FontWeight="SemiBold"
                           Style="{StaticResource SecondaryTextStyle}" />
                <TextBox Grid.Row="8"
                         x:Name="LiveLogTextBox"
                         IsReadOnly="True"
                         MinHeight="140"
                         TextWrapping="NoWrap"
                         VerticalScrollBarVisibility="Auto"
                         HorizontalScrollBarVisibility="Auto"
                         Style="{StaticResource LogBoxStyle}" />

                <Border Grid.Row="10" x:Name="MessagePanel" Margin="0,2,0,0" Style="{StaticResource PanelCardStyle}" Background="#1A1F33">
                  <Grid Margin="14">
                    <Grid.RowDefinitions>
                      <RowDefinition Height="Auto" />
                      <RowDefinition Height="8" />
                      <RowDefinition Height="Auto" />
                      <RowDefinition Height="10" />
                      <RowDefinition Height="Auto" />
                      <RowDefinition Height="10" />
                      <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>

                    <TextBlock x:Name="MessageTitleText" Grid.Row="0" FontSize="14" FontWeight="SemiBold" Style="{StaticResource PrimaryTextStyle}" Text="Ready." />
                    <TextBlock x:Name="MessageBodyText" Grid.Row="2" FontSize="12" Style="{StaticResource SecondaryTextStyle}" TextWrapping="Wrap" />
                    <TextBlock x:Name="SupportCodeText" Grid.Row="4" FontSize="12" Style="{StaticResource SecondaryTextStyle}" Text="" />

                    <Grid Grid.Row="6">
                      <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                      </Grid.ColumnDefinitions>

                      <CheckBox x:Name="LaunchAfterFinishCheckBox"
                                Grid.Column="0"
                                Content="Launch BloxMC Launcher"
                                VerticalAlignment="Center"
                                Visibility="Collapsed"
                                Style="{StaticResource InstallerCheckBoxStyle}" />

                      <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Right">
                        <Button x:Name="RetryButton" Content="Retry" Visibility="Collapsed" Margin="0,0,8,0" Style="{StaticResource PrimaryPillButton}" Click="RetryButton_Click" />
                        <Button x:Name="ViewLogsButton" Content="Open Log" Visibility="Collapsed" Margin="0,0,8,0" Style="{StaticResource SecondaryPillButton}" Click="ViewLogsButton_Click" />
                        <Button x:Name="CopyErrorButton" Content="Copy Error" Visibility="Collapsed" Margin="0,0,8,0" Style="{StaticResource SecondaryPillButton}" Click="CopyErrorButton_Click" />
                        <Button x:Name="CloseFailureButton" Content="Close" Visibility="Collapsed" Margin="0,0,8,0" Style="{StaticResource SecondaryPillButton}" Click="CloseFailureButton_Click" />
                        <Button x:Name="FinishButton" Content="Finish" Visibility="Collapsed" Style="{StaticResource PrimaryPillButton}" Click="FinishButton_Click" />
                      </StackPanel>
                    </Grid>
                  </Grid>
                </Border>
              </Grid>
              </ScrollViewer>
            </Border>

            <Border x:Name="SettingsTabContent" Style="{StaticResource PanelCardStyle}" Background="#1A1E36" Visibility="Collapsed">
              <Grid Margin="16">
                <Grid.RowDefinitions>
                  <RowDefinition Height="Auto" />
                  <RowDefinition Height="8" />
                  <RowDefinition Height="Auto" />
                  <RowDefinition Height="14" />
                  <RowDefinition Height="Auto" />
                  <RowDefinition Height="8" />
                  <RowDefinition Height="Auto" />
                  <RowDefinition Height="14" />
                  <RowDefinition Height="Auto" />
                  <RowDefinition Height="*" />
                  <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <TextBlock Grid.Row="0" Text="Settings" FontSize="20" FontWeight="SemiBold" Style="{StaticResource PrimaryTextStyle}" />

                <TextBlock Grid.Row="2" Text="Install path" Style="{StaticResource SecondaryTextStyle}" />
                <TextBox Grid.Row="4"
                         x:Name="InstallPathTextBox"
                         IsReadOnly="True"
                         TextWrapping="NoWrap"
                         HorizontalScrollBarVisibility="Auto"
                         VerticalScrollBarVisibility="Disabled"
                         Style="{StaticResource ReadOnlyTextBoxStyle}" />

                <TextBlock Grid.Row="6" Text="Installer logs" Style="{StaticResource SecondaryTextStyle}" />
                <TextBox Grid.Row="8"
                         x:Name="LogPathTextBox"
                         IsReadOnly="True"
                         TextWrapping="NoWrap"
                         HorizontalScrollBarVisibility="Auto"
                         VerticalScrollBarVisibility="Disabled"
                         Style="{StaticResource ReadOnlyTextBoxStyle}" />

                <StackPanel Grid.Row="10" Orientation="Horizontal" HorizontalAlignment="Right">
                  <CheckBox x:Name="SoundEffectsCheckBox"
                            Content="Sound effects"
                            IsChecked="True"
                            VerticalAlignment="Center"
                            Margin="0,0,12,0"
                            Style="{StaticResource InstallerCheckBoxStyle}" />
                  <Button Content="Open Log" Style="{StaticResource SecondaryPillButton}" Click="ViewLogsButton_Click" />
                </StackPanel>
              </Grid>
            </Border>

            <Border x:Name="EditTabContent" Style="{StaticResource PanelCardStyle}" Background="#1A1E36" Visibility="Collapsed">
              <Grid Margin="16">
                <Grid.RowDefinitions>
                  <RowDefinition Height="Auto" />
                  <RowDefinition Height="8" />
                  <RowDefinition Height="Auto" />
                  <RowDefinition Height="10" />
                  <RowDefinition Height="Auto" />
                  <RowDefinition Height="12" />
                  <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <TextBlock Grid.Row="0" Text="Edit Installer" FontSize="20" FontWeight="SemiBold" Style="{StaticResource PrimaryTextStyle}" />
                <TextBlock Grid.Row="2" Text="Unlock advanced installer controls." Style="{StaticResource SecondaryTextStyle}" />

                <Border Grid.Row="4" x:Name="EditLockedPanel" Style="{StaticResource PanelCardStyle}" Background="#161935">
                  <Grid Margin="12">
                    <Grid.ColumnDefinitions>
                      <ColumnDefinition Width="*" />
                      <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <PasswordBox x:Name="EditPasswordBox" Style="{StaticResource PasswordBoxStyle}" PasswordChar="*" />
                    <Button Grid.Column="1"
                            x:Name="EditUnlockButton"
                            Margin="10,0,0,0"
                            Content="Unlock"
                            Style="{StaticResource PrimaryPillButton}"
                            Click="EditUnlockButton_Click" />
                  </Grid>
                </Border>

                <Border Grid.Row="6" x:Name="EditUnlockedPanel" Style="{StaticResource PanelCardStyle}" Background="#161935" Visibility="Collapsed">
                  <StackPanel Margin="12">
                    <TextBlock Text="Advanced controls unlocked." Style="{StaticResource PrimaryTextStyle}" />
                    <CheckBox x:Name="VerboseLogsCheckBox"
                              Margin="0,10,0,0"
                              Content="Verbose log labels"
                              Style="{StaticResource InstallerCheckBoxStyle}" />
                    <CheckBox x:Name="ReducedMotionCheckBox"
                              Margin="0,8,0,0"
                              Content="Reduced motion"
                              Style="{StaticResource InstallerCheckBoxStyle}" />
                  </StackPanel>
                </Border>
              </Grid>
            </Border>
          </Grid>

          <TextBlock Grid.Row="6"
                     HorizontalAlignment="Left"
                     Text="Made &amp; developed by FirePhox"
                     FontSize="12"
                     Style="{StaticResource SecondaryTextStyle}" />
        </Grid>
      </Border>

      <Grid x:Name="ConfirmOverlay" Background="#B0000000" Visibility="Collapsed">
        <Border Width="430"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Style="{StaticResource PanelCardStyle}"
                Background="#171A32">
          <Grid Margin="16">
            <Grid.RowDefinitions>
              <RowDefinition Height="Auto" />
              <RowDefinition Height="8" />
              <RowDefinition Height="Auto" />
              <RowDefinition Height="14" />
              <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <TextBlock x:Name="ConfirmTitleText" Grid.Row="0" FontSize="18" FontWeight="SemiBold" Style="{StaticResource PrimaryTextStyle}" Text="Confirm action" />
            <TextBlock x:Name="ConfirmMessageText" Grid.Row="2" Style="{StaticResource SecondaryTextStyle}" />
            <StackPanel Grid.Row="4" Orientation="Horizontal" HorizontalAlignment="Right">
              <Button x:Name="ConfirmNoButton" Content="Cancel" Margin="0,0,8,0" Style="{StaticResource SecondaryPillButton}" Click="ConfirmNoButton_Click" />
              <Button x:Name="ConfirmYesButton" Content="Continue" Style="{StaticResource PrimaryPillButton}" Click="ConfirmYesButton_Click" />
            </StackPanel>
          </Grid>
        </Border>
      </Grid>
    </Grid>
  </Border>
</Window>
